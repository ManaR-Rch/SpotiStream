<div class="track-detail-container" *ngIf="track; else noTrack">
  <button (click)="goBack()" class="back-btn">‚Üê Back to Library</button>

  <div class="track-info">
    <h1>{{ track.title }}</h1>
    <p class="artist">by {{ track.artist }}</p>
    <p class="category">Category: {{ track.category }}</p>
    <p class="duration">Duration: {{ track.duration }}s</p>
    <p class="added">Added: {{ track.addedDate | date }}</p>
    <p class="plays">‚ñ∂Ô∏è Plays: {{ track.plays || 0 }}</p>
  </div>

  <div class="track-description" *ngIf="track.description">
    <h3>Description</h3>
    <p>{{ track.description }}</p>
  </div>

  <!-- Lecteur audio int√©gr√© -->
  <div class="player-container" *ngIf="playerState$ | async as playerState">
    <div class="player-header">
      <h3>Now Playing</h3>
    </div>

    <!-- Affichage du temps -->
    <div class="player-display">
      <div class="current-time">{{ formatTime(playerState.currentTime) }}</div>
      <div class="status">{{ playerState.status | titlecase }}</div>
      <div class="duration">{{ formatTime(playerState.duration) }}</div>
    </div>

    <!-- Barre de progression -->
    <div class="progress-bar">
      <input
        type="range"
        min="0"
        [max]="playerState.duration || 0"
        [value]="playerState.currentTime"
        (input)="seek($event)"
        class="progress-slider"
      />
    </div>

    <!-- Contr√¥les de lecture -->
    <div class="player-controls">
      <button (click)="playTrack()" class="control-btn play-btn" title="Play">
        ‚ñ∂ Play
      </button>
      <button (click)="pauseTrack()" class="control-btn pause-btn" title="Pause">
        ‚è∏ Pause
      </button>
      <button (click)="stopTrack()" class="control-btn stop-btn" title="Stop">
        ‚èπ Stop
      </button>
    </div>

    <!-- Contr√¥le du volume -->
    <div class="volume-control">
      <label for="volume">üîä Volume:</label>
      <input
        id="volume"
        type="range"
        min="0"
        max="1"
        step="0.1"
        [value]="playerState.volume"
        (input)="setVolume($event)"
        class="volume-slider"
      />
      <span>{{ Math.round(playerState.volume * 100) }}%</span>
    </div>

    <!-- Indicateur de chargement -->
    <div class="loading" *ngIf="playerState.isLoading">
      ‚åõ Loading...
    </div>
  </div>
</div>

<ng-template #noTrack>
  <div class="no-track">
    <p>Track not found</p>
    <button (click)="goBack()" class="back-btn">‚Üê Back to Library</button>
  </div>
</ng-template>
