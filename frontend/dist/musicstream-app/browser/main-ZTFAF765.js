import{a as Pn}from"./chunk-OM37OJSF.js";import{$ as $e,A as un,Aa as B,B as je,C as Tt,Ca as w,D as ln,Da as Ve,E as dn,Ea as yn,F as kt,G as De,H as fn,I as pn,J as de,K as Ue,L as mn,La as At,M as Ne,Ma as Rt,N as St,P as S,Pa as Tn,Qa as he,R as m,S as y,T as f,Ta as Ct,U as gn,Ua as Be,V as ie,Va as Ot,W as fe,X as hn,Ya as kn,Z,Za as Sn,_ as Y,_a as bn,a as p,aa as pe,ab as xn,b as v,ba as bt,bb as En,c as we,d as H,da as ze,db as In,e as _e,ea as Le,eb as An,f as Me,g as tn,ga as me,gb as Rn,h as Fe,hb as ve,i as nn,ia as W,ib as Cn,j as Pe,jb as On,ka as xt,l as J,la as He,lb as qe,m as vt,mb as wn,n as rn,nb as _n,o as A,ob as Mn,p as Q,pb as Fn,qa as Et,r as oe,s as j,t as V,ta as ge,u as yt,v as on,va as R,w as K,wa as E,x as sn,xa as It,y as cn,ya as vn,z as an,za as X}from"./chunk-5P6X64GI.js";function ye(e,n){let t=!n?.manualCleanup;t&&!n?.injector&&hn(ye);let r=t?n?.injector?.get(bt)??f(bt):null,o=no(n?.equal),i;n?.requireSync?i=me({kind:0},{equal:o}):i=me({kind:1,value:n?.initialValue},{equal:o});let s,a=e.subscribe({next:l=>i.set({kind:1,value:l}),error:l=>{if(n?.rejectErrors)throw l;i.set({kind:2,error:l})},complete:()=>{s?.()}});if(n?.requireSync&&i().kind===0)throw new St(601,!1);return s=r?.onDestroy(a.unsubscribe.bind(a)),Be(()=>{let l=i();switch(l.kind){case 1:return l.value;case 2:throw l.error;case 0:throw new St(601,!1)}},{equal:n?.equal})}function no(e=Object.is){return(n,t)=>n.kind===1&&t.kind===1&&e(n.value,t.value)}var Mt={};function I(e,n){if(Mt[e]=(Mt[e]||0)+1,typeof n=="function")return wt(e,(...r)=>v(p({},n(...r)),{type:e}));switch(n?n._as:"empty"){case"empty":return wt(e,()=>({type:e}));case"props":return wt(e,r=>v(p({},r),{type:e}));default:throw new Error("Unexpected config.")}}function M(){return{_as:"props",_p:void 0}}function wt(e,n){return Object.defineProperty(n,"type",{value:e,writable:!1})}function ro(e,n){if(e==null)throw new Error(`${n} must be defined.`)}var Se="@ngrx/store/init",z=(()=>{class e extends Me{constructor(){super({type:Se})}next(t){if(typeof t=="function")throw new TypeError(`
        Dispatch expected an object, instead it received a function.
        If you're using the createAction function, make sure to invoke the function
        before dispatching the action. For example, someAction should be someAction().`);if(typeof t>"u")throw new TypeError("Actions must be objects");if(typeof t.type>"u")throw new TypeError("Actions must have a type property");super.next(t)}complete(){}ngOnDestroy(){super.complete()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=S({token:e,factory:e.\u0275fac})}}return e})(),oo=[z],Yn=new m("@ngrx/store Internal Root Guard"),jn=new m("@ngrx/store Internal Initial State"),be=new m("@ngrx/store Initial State"),Wn=new m("@ngrx/store Reducer Factory"),Dn=new m("@ngrx/store Internal Reducer Factory Provider"),Xn=new m("@ngrx/store Initial Reducers"),_t=new m("@ngrx/store Internal Initial Reducers"),ts=new m("@ngrx/store Store Features"),Un=new m("@ngrx/store Internal Store Reducers"),ns=new m("@ngrx/store Internal Feature Reducers"),rs=new m("@ngrx/store Internal Feature Configs"),io=new m("@ngrx/store Internal Store Features"),os=new m("@ngrx/store Internal Feature Reducers Token"),so=new m("@ngrx/store Feature Reducers"),Nn=new m("@ngrx/store User Provided Meta Reducers"),Ge=new m("@ngrx/store Meta Reducers"),$n=new m("@ngrx/store Internal Resolved Meta Reducers"),zn=new m("@ngrx/store User Runtime Checks Config"),Ln=new m("@ngrx/store Internal User Runtime Checks Config"),Te=new m("@ngrx/store Internal Runtime Checks"),Dt=new m("@ngrx/store Check if Action types are unique"),ke=new m("@ngrx/store Root Store Provider"),Ke=new m("@ngrx/store Feature State Provider");function co(e,n={}){let t=Object.keys(e),r={};for(let i=0;i<t.length;i++){let s=t[i];typeof e[s]=="function"&&(r[s]=e[s])}let o=Object.keys(r);return function(s,a){s=s===void 0?n:s;let l=!1,c={};for(let d=0;d<o.length;d++){let u=o[d],T=r[u],O=s[u],h=T(O,a);c[u]=h,l=l||h!==O}return l?c:s}}function ao(e,n){return Object.keys(e).filter(t=>t!==n).reduce((t,r)=>Object.assign(t,{[r]:e[r]}),{})}function Jn(...e){return function(n){if(e.length===0)return n;let t=e[e.length-1];return e.slice(0,-1).reduceRight((o,i)=>i(o),t(n))}}function Qn(e,n){return Array.isArray(n)&&n.length>0&&(e=Jn.apply(null,[...n,e])),(t,r)=>{let o=e(t);return(i,s)=>(i=i===void 0?r:i,o(i,s))}}function uo(e){let n=Array.isArray(e)&&e.length>0?Jn(...e):t=>t;return(t,r)=>(t=n(t),(o,i)=>(o=o===void 0?r:o,t(o,i)))}var ee=class extends H{},se=class extends z{},Ye="@ngrx/store/update-reducers",Ze=(()=>{class e extends Me{get currentReducers(){return this.reducers}constructor(t,r,o,i){super(i(o,r)),this.dispatcher=t,this.initialState=r,this.reducers=o,this.reducerFactory=i}addFeature(t){this.addFeatures([t])}addFeatures(t){let r=t.reduce((o,{reducers:i,reducerFactory:s,metaReducers:a,initialState:l,key:c})=>{let d=typeof i=="function"?uo(a)(i,l):Qn(s,a)(i,l);return o[c]=d,o},{});this.addReducers(r)}removeFeature(t){this.removeFeatures([t])}removeFeatures(t){this.removeReducers(t.map(r=>r.key))}addReducer(t,r){this.addReducers({[t]:r})}addReducers(t){this.reducers=p(p({},this.reducers),t),this.updateReducers(Object.keys(t))}removeReducer(t){this.removeReducers([t])}removeReducers(t){t.forEach(r=>{this.reducers=ao(this.reducers,r)}),this.updateReducers(t)}updateReducers(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:Ye,features:t})}ngOnDestroy(){this.complete()}static{this.\u0275fac=function(r){return new(r||e)(y(se),y(be),y(Xn),y(Wn))}}static{this.\u0275prov=S({token:e,factory:e.\u0275fac})}}return e})(),lo=[Ze,{provide:ee,useExisting:Ze},{provide:se,useExisting:z}],te=(()=>{class e extends _e{ngOnDestroy(){this.complete()}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=$e(e)))(o||e)}})()}static{this.\u0275prov=S({token:e,factory:e.\u0275fac})}}return e})(),fo=[te],ce=class extends H{},Hn=(()=>{class e extends Me{static{this.INIT=Se}constructor(t,r,o,i){super(i);let a=t.pipe(Pe(Fe)).pipe(Ne(r)),l={state:i},c=a.pipe(De(po,l));this.stateSubscription=c.subscribe(({state:d,action:u})=>{this.next(d),o.next(u)}),this.state=ye(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}static{this.\u0275fac=function(r){return new(r||e)(y(z),y(ee),y(te),y(be))}}static{this.\u0275prov=S({token:e,factory:e.\u0275fac})}}return e})();function po(e={state:void 0},[n,t]){let{state:r}=e;return{state:t(r,n),action:n}}var mo=[Hn,{provide:ce,useExisting:Hn}],P=(()=>{class e extends H{constructor(t,r,o,i){super(),this.actionsObserver=r,this.reducerManager=o,this.injector=i,this.source=t,this.state=t.state}select(t,...r){return ho.call(null,t,...r)(this)}selectSignal(t,r){return Be(()=>t(this.state()),r)}lift(t){let r=new e(this,this.actionsObserver,this.reducerManager);return r.operator=t,r}dispatch(t,r){if(typeof t=="function")return this.processDispatchFn(t,r);this.actionsObserver.next(t)}next(t){this.actionsObserver.next(t)}error(t){this.actionsObserver.error(t)}complete(){this.actionsObserver.complete()}addReducer(t,r){this.reducerManager.addReducer(t,r)}removeReducer(t){this.reducerManager.removeReducer(t)}processDispatchFn(t,r){ro(this.injector,"Store Injector");let o=r?.injector??vo()??this.injector;return Ot(()=>{let i=t();Ct(()=>this.dispatch(i))},{injector:o})}static{this.\u0275fac=function(r){return new(r||e)(y(ce),y(z),y(Ze),y(pe))}}static{this.\u0275prov=S({token:e,factory:e.\u0275fac})}}return e})(),go=[P];function ho(e,n,...t){return function(o){let i;if(typeof e=="string"){let s=[n,...t].filter(Boolean);i=o.pipe(dn(e,...s))}else if(typeof e=="function")i=o.pipe(A(s=>e(s,n)));else throw new TypeError(`Unexpected type '${typeof e}' in select operator, expected 'string' or 'function'`);return i.pipe(an())}}function vo(){try{return f(pe)}catch{return}}var Ut="https://ngrx.io/guide/store/configuration/runtime-checks";function Vn(e){return e===void 0}function Bn(e){return e===null}function er(e){return Array.isArray(e)}function yo(e){return typeof e=="string"}function To(e){return typeof e=="boolean"}function ko(e){return typeof e=="number"}function tr(e){return typeof e=="object"&&e!==null}function So(e){return tr(e)&&!er(e)}function bo(e){if(!So(e))return!1;let n=Object.getPrototypeOf(e);return n===Object.prototype||n===null}function Ft(e){return typeof e=="function"}function xo(e){return Ft(e)&&e.hasOwnProperty("\u0275cmp")}function Eo(e,n){return Object.prototype.hasOwnProperty.call(e,n)}var Io=!1;function Ao(){return Io}function qn(e,n){return e===n}function Ro(e,n,t){for(let r=0;r<e.length;r++)if(!t(e[r],n[r]))return!0;return!1}function nr(e,n=qn,t=qn){let r=null,o=null,i;function s(){r=null,o=null}function a(d=void 0){i={result:d}}function l(){i=void 0}function c(){if(i!==void 0)return i.result;if(!r)return o=e.apply(null,arguments),r=arguments,o;if(!Ro(arguments,r,n))return o;let d=e.apply(null,arguments);return r=arguments,t(o,d)?o:(o=d,d)}return{memoized:c,reset:s,setResult:a,clearResult:l}}function F(...e){return Oo(nr)(...e)}function Co(e,n,t,r){if(t===void 0){let i=n.map(s=>s(e));return r.memoized.apply(null,i)}let o=n.map(i=>i(e,t));return r.memoized.apply(null,[...o,t])}function Oo(e,n={stateFn:Co}){return function(...t){let r=t;if(Array.isArray(r[0])){let[d,...u]=r;r=[...d,...u]}else r.length===1&&wo(r[0])&&(r=_o(r[0]));let o=r.slice(0,r.length-1),i=r[r.length-1],s=o.filter(d=>d.release&&typeof d.release=="function"),a=e(function(...d){return i.apply(null,d)}),l=nr(function(d,u){return n.stateFn.apply(null,[d,o,u,a])});function c(){l.reset(),a.reset(),s.forEach(d=>d.release())}return Object.assign(l.memoized,{release:c,projector:a.memoized,setResult:l.setResult,clearResult:l.clearResult})}}function rr(e){return F(n=>{let t=n[e];return!Ao()&&he()&&!(e in n)&&console.warn(`@ngrx/store: The feature name "${e}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${e}', ...) or StoreModule.forFeature('${e}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),t},n=>n)}function wo(e){return!!e&&typeof e=="object"&&Object.values(e).every(n=>typeof n=="function")}function _o(e){let n=Object.values(e),t=Object.keys(e),r=(...o)=>t.reduce((i,s,a)=>v(p({},i),{[s]:o[a]}),{});return[...n,r]}function Mo(e){return e instanceof m?f(e):e}function or(e){return typeof e=="function"?e():e}function Fo(e,n){return e.concat(n)}function Po(){if(f(P,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function jo(e,n){return function(t,r){let o=n.action(r)?Pt(r):r,i=e(t,o);return n.state()?Pt(i):i}}function Pt(e){Object.freeze(e);let n=Ft(e);return Object.getOwnPropertyNames(e).forEach(t=>{if(!t.startsWith("\u0275")&&Eo(e,t)&&(!n||t!=="caller"&&t!=="callee"&&t!=="arguments")){let r=e[t];(tr(r)||Ft(r))&&!Object.isFrozen(r)&&Pt(r)}}),e}function Do(e,n){return function(t,r){if(n.action(r)){let i=jt(r);Gn(i,"action")}let o=e(t,r);if(n.state()){let i=jt(o);Gn(i,"state")}return o}}function jt(e,n=[]){return(Vn(e)||Bn(e))&&n.length===0?{path:["root"],value:e}:Object.keys(e).reduce((r,o)=>{if(r)return r;let i=e[o];return xo(i)?r:Vn(i)||Bn(i)||ko(i)||To(i)||yo(i)||er(i)?!1:bo(i)?jt(i,[...n,o]):{path:[...n,o],value:i}},!1)}function Gn(e,n){if(e===!1)return;let t=e.path.join("."),r=new Error(`Detected unserializable ${n} at "${t}". ${Ut}#strict${n}serializability`);throw r.value=e.value,r.unserializablePath=t,r}function Uo(e,n){return function(t,r){if(n.action(r)&&!ze.isInAngularZone())throw new Error(`Action '${r.type}' running outside NgZone. ${Ut}#strictactionwithinngzone`);return e(t,r)}}function No(e){return he()?p({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},e):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function $o({strictActionSerializability:e,strictStateSerializability:n}){return t=>e||n?Do(t,{action:r=>e&&!Nt(r),state:()=>n}):t}function zo({strictActionImmutability:e,strictStateImmutability:n}){return t=>e||n?jo(t,{action:r=>e&&!Nt(r),state:()=>n}):t}function Nt(e){return e.type.startsWith("@ngrx")}function Lo({strictActionWithinNgZone:e}){return n=>e?Uo(n,{action:t=>e&&!Nt(t)}):n}function Ho(e){return[{provide:Ln,useValue:e},{provide:zn,useFactory:Bo,deps:[Ln]},{provide:Te,deps:[zn],useFactory:No},{provide:Ge,multi:!0,deps:[Te],useFactory:zo},{provide:Ge,multi:!0,deps:[Te],useFactory:$o},{provide:Ge,multi:!0,deps:[Te],useFactory:Lo}]}function Vo(){return[{provide:Dt,multi:!0,deps:[Te],useFactory:qo}]}function Bo(e){return e}function qo(e){if(!e.strictActionTypeUniqueness)return;let n=Object.entries(Mt).filter(([,t])=>t>1).map(([t])=>t);if(n.length)throw new Error(`Action types are registered more than once, ${n.map(t=>`"${t}"`).join(", ")}. ${Ut}#strictactiontypeuniqueness`)}function Go(e={},n={}){return[{provide:Yn,useFactory:Po},{provide:jn,useValue:n.initialState},{provide:be,useFactory:or,deps:[jn]},{provide:_t,useValue:e},{provide:Un,useExisting:e instanceof m?e:_t},{provide:Xn,deps:[_t,[new gn(Un)]],useFactory:Mo},{provide:Nn,useValue:n.metaReducers?n.metaReducers:[]},{provide:$n,deps:[Ge,Nn],useFactory:Fo},{provide:Dn,useValue:n.reducerFactory?n.reducerFactory:co},{provide:Wn,deps:[Dn,$n],useFactory:Qn},oo,lo,fo,mo,go,Ho(n.runtimeChecks),Vo()]}function Ko(){f(z),f(ee),f(te),f(P),f(Yn,{optional:!0}),f(Dt,{optional:!0})}var Zo=[{provide:ke,useFactory:Ko},fe(()=>f(ke))];function ir(e,n){return ie([...Go(e,n),Zo])}function Yo(){f(ke);let e=f(io),n=f(so),t=f(Ze);f(Dt,{optional:!0});let r=e.map((o,i)=>{let a=n.shift()[i];return v(p({},o),{reducers:a,initialState:or(o.initialState)})});t.addFeatures(r)}var is=[{provide:Ke,useFactory:Yo},fe(()=>f(Ke))];function C(...e){let n=e.pop(),t=e.map(r=>r.type);return{reducer:n,types:t}}function sr(e,...n){let t=new Map;for(let r of n)for(let o of r.types){let i=t.get(o);if(i){let s=(a,l)=>r.reducer(i(a,l),l);t.set(o,s)}else t.set(o,r.reducer)}return function(r=e,o){let i=t.get(o.type);return i?i(r,o):r}}var Wo={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},We="__@ngrx/effects_create__";function ne(e,n={}){let t=n.functional?e:e(),r=p(p({},Wo),n);return Object.defineProperty(t,We,{value:r}),t}function Xo(e){return Object.getOwnPropertyNames(e).filter(r=>e[r]&&e[r].hasOwnProperty(We)?e[r][We].hasOwnProperty("dispatch"):!1).map(r=>{let o=e[r][We];return p({propertyName:r},o)})}function Jo(e){return Xo(e)}function ar(e){return Object.getPrototypeOf(e)}function Qo(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function ur(e){return typeof e=="function"}function ei(e){return e.filter(ur)}function ti(e,n,t){let r=ar(e),i=!!r&&r.constructor.name!=="Object"?r.constructor.name:null,s=Jo(e).map(({propertyName:a,dispatch:l,useEffectsErrorHandler:c})=>{let d=typeof e[a]=="function"?e[a]():e[a],u=c?t(d,n):d;return l===!1?u.pipe(sn()):u.pipe(ln()).pipe(A(O=>({effect:e[a],notification:O,propertyName:a,sourceName:i,sourceInstance:e})))});return oe(...s)}var ni=10;function lr(e,n,t=ni){return e.pipe(V(r=>(n&&n.handleError(r),t<=1?e:lr(e,n,t-1))))}var dr=(()=>{class e extends H{constructor(t){super(),t&&(this.source=t)}lift(t){let r=new e;return r.source=this,r.operator=t,r}static{this.\u0275fac=function(r){return new(r||e)(y(te))}}static{this.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function re(...e){return j(n=>e.some(t=>typeof t=="string"?t===n.type:t.type===n.type))}var ys=new m("@ngrx/effects Internal Root Guard"),Ts=new m("@ngrx/effects User Provided Effects"),ks=new m("@ngrx/effects Internal Root Effects"),Ss=new m("@ngrx/effects Internal Root Effects Instances"),bs=new m("@ngrx/effects Internal Feature Effects"),xs=new m("@ngrx/effects Internal Feature Effects Instance Groups"),ri=new m("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>lr}),oi="@ngrx/effects/init",ii=I(oi);function si(e,n){if(e.notification.kind==="N"){let t=e.notification.value;!ci(t)&&n.handleError(new Error(`Effect ${ai(e)} dispatched an invalid action: ${ui(t)}`))}}function ci(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function ai({propertyName:e,sourceInstance:n,sourceName:t}){let r=typeof n[e]=="function";return!!t?`"${t}.${String(e)}${r?"()":""}"`:`"${String(e)}()"`}function ui(e){try{return JSON.stringify(e)}catch{return e}}var li="ngrxOnIdentifyEffects";function di(e){return $t(e,li)}var fi="ngrxOnRunEffects";function pi(e){return $t(e,fi)}var mi="ngrxOnInitEffects";function gi(e){return $t(e,mi)}function $t(e,n){return e&&n in e&&typeof e[n]=="function"}var fr=(()=>{class e extends _e{constructor(t,r){super(),this.errorHandler=t,this.effectsErrorHandler=r}addEffects(t){this.next(t)}toActions(){return this.pipe(Tt(t=>Qo(t)?ar(t):t),Q(t=>t.pipe(Tt(hi))),Q(t=>{let r=t.pipe(un(i=>vi(this.errorHandler,this.effectsErrorHandler)(i)),A(i=>(si(i,this.errorHandler),i.notification)),j(i=>i.kind==="N"&&i.value!=null),cn()),o=t.pipe(K(1),j(gi),A(i=>i.ngrxOnInitEffects()));return oe(r,o)}))}static{this.\u0275fac=function(r){return new(r||e)(y(Le),y(ri))}}static{this.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function hi(e){return di(e)?e.ngrxOnIdentifyEffects():""}function vi(e,n){return t=>{let r=ti(t,e,n);return pi(t)?t.ngrxOnRunEffects(r):r}}var yi=(()=>{class e{get isStarted(){return!!this.effectsSubscription}constructor(t,r){this.effectSources=t,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(r){return new(r||e)(y(fr),y(P))}}static{this.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function pr(...e){let n=e.flat(),t=ei(n);return ie([t,fe(()=>{f(ke),f(Ke,{optional:!0});let r=f(yi),o=f(fr),i=!r.isStarted;i&&r.start();for(let s of n){let a=ur(s)?f(s):s;o.addEffects(a)}i&&f(P).dispatch(ii())})])}var Ee="PERFORM_ACTION",Ti="REFRESH",Tr="RESET",kr="ROLLBACK",Sr="COMMIT",br="SWEEP",xr="TOGGLE_ACTION",ki="SET_ACTIONS_ACTIVE",Er="JUMP_TO_STATE",Ir="JUMP_TO_ACTION",Jt="IMPORT_STATE",Ar="LOCK_CHANGES",Rr="PAUSE_RECORDING",ae=class{constructor(n,t){if(this.action=n,this.timestamp=t,this.type=Ee,typeof n.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},zt=class{constructor(){this.type=Ti}},Lt=class{constructor(n){this.timestamp=n,this.type=Tr}},Ht=class{constructor(n){this.timestamp=n,this.type=kr}},Vt=class{constructor(n){this.timestamp=n,this.type=Sr}},Bt=class{constructor(){this.type=br}},qt=class{constructor(n){this.id=n,this.type=xr}};var Gt=class{constructor(n){this.index=n,this.type=Er}},Kt=class{constructor(n){this.actionId=n,this.type=Ir}},Zt=class{constructor(n){this.nextLiftedState=n,this.type=Jt}},Yt=class{constructor(n){this.status=n,this.type=Ar}},Wt=class{constructor(n){this.status=n,this.type=Rr}};var et=new m("@ngrx/store-devtools Options"),mr=new m("@ngrx/store-devtools Initial Config");function Cr(){return null}var Si="NgRx Store DevTools";function bi(e){let n={maxAge:!1,monitor:Cr,actionSanitizer:void 0,stateSanitizer:void 0,name:Si,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},t=typeof e=="function"?e():e,r=t.logOnly?{pause:!0,export:!0,test:!0}:!1,o=t.features||r||n.features;o.import===!0&&(o.import="custom");let i=Object.assign({},n,{features:o},t);if(i.maxAge&&i.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${i.maxAge}`);return i}function gr(e,n){return e.filter(t=>n.indexOf(t)<0)}function Or(e){let{computedStates:n,currentStateIndex:t}=e;if(t>=n.length){let{state:o}=n[n.length-1];return o}let{state:r}=n[t];return r}function xe(e){return new ae(e,+Date.now())}function xi(e,n){return Object.keys(n).reduce((t,r)=>{let o=Number(r);return t[o]=wr(e,n[o],o),t},{})}function wr(e,n,t){return v(p({},n),{action:e(n.action,t)})}function Ei(e,n){return n.map((t,r)=>({state:_r(e,t.state,r),error:t.error}))}function _r(e,n,t){return e(n,t)}function Mr(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function Ii(e,n,t,r){let o=[],i={},s=[];return e.stagedActionIds.forEach((a,l)=>{let c=e.actionsById[a];c&&(l&&Qt(e.computedStates[l],c,n,t,r)||(i[a]=c,o.push(a),s.push(e.computedStates[l])))}),v(p({},e),{stagedActionIds:o,actionsById:i,computedStates:s})}function Qt(e,n,t,r,o){let i=t&&!t(e,n.action),s=r&&!n.action.type.match(r.map(l=>hr(l)).join("|")),a=o&&n.action.type.match(o.map(l=>hr(l)).join("|"));return i||s||a}function hr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Fr(e){return{ngZone:e?f(ze):null,connectInZone:e}}var tt=(()=>{class e extends z{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=$e(e)))(o||e)}})()}static{this.\u0275prov=S({token:e,factory:e.\u0275fac})}}return e})(),Xe={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Xt=new m("@ngrx/store-devtools Redux Devtools Extension"),Pr=(()=>{class e{constructor(t,r,o){this.config=r,this.dispatcher=o,this.zoneConfig=Fr(this.config.connectInZone),this.devtoolsExtension=t,this.createActionStreams()}notify(t,r){if(this.devtoolsExtension)if(t.type===Ee){if(r.isLocked||r.isPaused)return;let o=Or(r);if(Mr(this.config)&&Qt(o,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let i=this.config.stateSanitizer?_r(this.config.stateSanitizer,o,r.currentStateIndex):o,s=this.config.actionSanitizer?wr(this.config.actionSanitizer,t,r.nextActionId):t;this.sendToReduxDevtools(()=>this.extensionConnection.send(s,i))}else{let o=v(p({},r),{stagedActionIds:r.stagedActionIds,actionsById:this.config.actionSanitizer?xi(this.config.actionSanitizer,r.actionsById):r.actionsById,computedStates:this.config.stateSanitizer?Ei(this.config.stateSanitizer,r.computedStates):r.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,o,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new H(t=>{let r=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=r,r.init(),r.subscribe(o=>t.next(o)),r.unsubscribe}):nn}createActionStreams(){let t=this.createChangesObservable().pipe(fn()),r=t.pipe(j(c=>c.type===Xe.START)),o=t.pipe(j(c=>c.type===Xe.STOP)),i=t.pipe(j(c=>c.type===Xe.DISPATCH),A(c=>this.unwrapAction(c.payload)),yt(c=>c.type===Jt?this.dispatcher.pipe(j(d=>d.type===Ye),rn(1e3),on(1e3),A(()=>c),V(()=>J(c)),K(1)):J(c))),a=t.pipe(j(c=>c.type===Xe.ACTION),A(c=>this.unwrapAction(c.payload))).pipe(Ue(o)),l=i.pipe(Ue(o));this.start$=r.pipe(Ue(o)),this.actions$=this.start$.pipe(de(()=>a)),this.liftedActions$=this.start$.pipe(de(()=>l))}unwrapAction(t){return typeof t=="string"?(0,eval)(`(${t})`):t}getExtensionConfig(t){let r={name:t.name,features:t.features,serialize:t.serialize,autoPause:t.autoPause??!1,trace:t.trace??!1,traceLimit:t.traceLimit??75};return t.maxAge!==!1&&(r.maxAge=t.maxAge),r}sendToReduxDevtools(t){try{t()}catch(r){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",r)}}static{this.\u0275fac=function(r){return new(r||e)(y(Xt),y(et),y(tt))}}static{this.\u0275prov=S({token:e,factory:e.\u0275fac})}}return e})(),Qe={type:Se},Ai="@ngrx/store-devtools/recompute",Ri={type:Ai};function jr(e,n,t,r,o){if(r)return{state:t,error:"Interrupted by an error up the chain"};let i=t,s;try{i=e(t,n)}catch(a){s=a.toString(),o.handleError(a)}return{state:i,error:s}}function Je(e,n,t,r,o,i,s,a,l){if(n>=e.length&&e.length===i.length)return e;let c=e.slice(0,n),d=i.length-(l?1:0);for(let u=n;u<d;u++){let T=i[u],O=o[T].action,h=c[u-1],g=h?h.state:r,U=h?h.error:void 0,N=s.indexOf(T)>-1?h:jr(t,O,g,U,a);c.push(N)}return l&&c.push(e[e.length-1]),c}function Ci(e,n){return{monitorState:n(void 0,{}),nextActionId:1,actionsById:{0:xe(Qe)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function Oi(e,n,t,r,o={}){return i=>(s,a)=>{let{monitorState:l,actionsById:c,nextActionId:d,stagedActionIds:u,skippedActionIds:T,committedState:O,currentStateIndex:h,computedStates:g,isLocked:U,isPaused:_}=s||n;s||(c=Object.create(c));function N(x){let b=x,G=u.slice(1,b+1);for(let D=0;D<G.length;D++)if(g[D+1].error){b=D,G=u.slice(1,b+1);break}else delete c[G[D]];T=T.filter(D=>G.indexOf(D)===-1),u=[0,...u.slice(b+1)],O=g[b].state,g=g.slice(b),h=h>b?h-b:0}function $(){c={0:xe(Qe)},d=1,u=[0],T=[],O=g[h].state,h=0,g=[]}let k=0;switch(a.type){case Ar:{U=a.status,k=1/0;break}case Rr:{_=a.status,_?(u=[...u,d],c[d]=new ae({type:"@ngrx/devtools/pause"},+Date.now()),d++,k=u.length-1,g=g.concat(g[g.length-1]),h===u.length-2&&h++,k=1/0):$();break}case Tr:{c={0:xe(Qe)},d=1,u=[0],T=[],O=e,h=0,g=[];break}case Sr:{$();break}case kr:{c={0:xe(Qe)},d=1,u=[0],T=[],h=0,g=[];break}case xr:{let{id:x}=a;T.indexOf(x)===-1?T=[x,...T]:T=T.filter(G=>G!==x),k=u.indexOf(x);break}case ki:{let{start:x,end:b,active:G}=a,D=[];for(let ht=x;ht<b;ht++)D.push(ht);G?T=gr(T,D):T=[...T,...D],k=u.indexOf(x);break}case Er:{h=a.index,k=1/0;break}case Ir:{let x=u.indexOf(a.actionId);x!==-1&&(h=x),k=1/0;break}case br:{u=gr(u,T),T=[],h=Math.min(h,u.length-1);break}case Ee:{if(U)return s||n;if(_||s&&Qt(s.computedStates[h],a,o.predicate,o.actionsSafelist,o.actionsBlocklist)){let b=g[g.length-1];g=[...g.slice(0,-1),jr(i,a.action,b.state,b.error,t)],k=1/0;break}o.maxAge&&u.length===o.maxAge&&N(1),h===u.length-1&&h++;let x=d++;c[x]=a,u=[...u,x],k=u.length-1;break}case Jt:{({monitorState:l,actionsById:c,nextActionId:d,stagedActionIds:u,skippedActionIds:T,committedState:O,currentStateIndex:h,computedStates:g,isLocked:U,isPaused:_}=a.nextLiftedState);break}case Se:{k=0,o.maxAge&&u.length>o.maxAge&&(g=Je(g,k,i,O,c,u,T,t,_),N(u.length-o.maxAge),k=1/0);break}case Ye:{if(g.filter(b=>b.error).length>0)k=0,o.maxAge&&u.length>o.maxAge&&(g=Je(g,k,i,O,c,u,T,t,_),N(u.length-o.maxAge),k=1/0);else{if(!_&&!U){h===u.length-1&&h++;let b=d++;c[b]=new ae(a,+Date.now()),u=[...u,b],k=u.length-1,g=Je(g,k,i,O,c,u,T,t,_)}g=g.map(b=>v(p({},b),{state:i(b.state,Ri)})),h=u.length-1,o.maxAge&&u.length>o.maxAge&&N(u.length-o.maxAge),k=1/0}break}default:{k=1/0;break}}return g=Je(g,k,i,O,c,u,T,t,_),l=r(l,a),{monitorState:l,actionsById:c,nextActionId:d,stagedActionIds:u,skippedActionIds:T,committedState:O,currentStateIndex:h,computedStates:g,isLocked:U,isPaused:_}}}var vr=(()=>{class e{constructor(t,r,o,i,s,a,l,c){let d=Ci(l,c.monitor),u=Oi(l,d,a,c.monitor,c),T=oe(oe(r.asObservable().pipe(pn(1)),i.actions$).pipe(A(xe)),t,i.liftedActions$).pipe(Pe(Fe)),O=o.pipe(A(u)),h=Fr(c.connectInZone),g=new tn(1);this.liftedStateSubscription=T.pipe(Ne(O),yr(h),De(({state:N},[$,k])=>{let x=k(N,$);return $.type!==Ee&&Mr(c)&&(x=Ii(x,c.predicate,c.actionsSafelist,c.actionsBlocklist)),i.notify($,x),{state:x,action:$}},{state:d,action:null})).subscribe(({state:N,action:$})=>{if(g.next(N),$.type===Ee){let k=$.action;s.next(k)}}),this.extensionStartSubscription=i.start$.pipe(yr(h)).subscribe(()=>{this.refresh()});let U=g.asObservable(),_=U.pipe(A(Or));Object.defineProperty(_,"state",{value:ye(_,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=t,this.liftedState=U,this.state=_}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(t){this.dispatcher.next(t)}next(t){this.dispatcher.next(t)}error(t){}complete(){}performAction(t){this.dispatch(new ae(t,+Date.now()))}refresh(){this.dispatch(new zt)}reset(){this.dispatch(new Lt(+Date.now()))}rollback(){this.dispatch(new Ht(+Date.now()))}commit(){this.dispatch(new Vt(+Date.now()))}sweep(){this.dispatch(new Bt)}toggleAction(t){this.dispatch(new qt(t))}jumpToAction(t){this.dispatch(new Kt(t))}jumpToState(t){this.dispatch(new Gt(t))}importState(t){this.dispatch(new Zt(t))}lockChanges(t){this.dispatch(new Yt(t))}pauseRecording(t){this.dispatch(new Wt(t))}static{this.\u0275fac=function(r){return new(r||e)(y(tt),y(z),y(ee),y(Pr),y(te),y(Le),y(be),y(et))}}static{this.\u0275prov=S({token:e,factory:e.\u0275fac})}}return e})();function yr({ngZone:e,connectInZone:n}){return t=>n?new H(r=>t.subscribe({next:o=>e.run(()=>r.next(o)),error:o=>e.run(()=>r.error(o)),complete:()=>e.run(()=>r.complete())})):t}var wi=new m("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function _i(e,n){return!!e||n.monitor!==Cr}function Mi(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function Fi(e){return e.state}function Dr(e={}){return ie([Pr,tt,vr,{provide:mr,useValue:e},{provide:wi,deps:[Xt,et],useFactory:_i},{provide:Xt,useFactory:Mi},{provide:et,deps:[mr],useFactory:bi},{provide:ce,deps:[vr],useFactory:Fi},{provide:se,useExisting:tt}])}var Ie=rr("tracks"),L=F(Ie,e=>e.tracks),en=F(Ie,e=>e.loading),Pi=F(Ie,e=>e.error),Us=F(Ie,e=>e.success),ji=F(Ie,e=>e.selectedTrackId),Ns=F(L,ji,(e,n)=>n&&e.find(t=>t.id===n)||null),Di=F(L,e=>e.length);var $s=F(L,e=>{let n=e.map(t=>t.category).filter(t=>!!t);return["all",...new Set(n)]});var zs=F(L,e=>[...e].sort((n,t)=>new Date(t.addedDate).getTime()-new Date(n.addedDate).getTime())),Ls=F(L,e=>[...e].sort((n,t)=>n.title.localeCompare(t.title))),Hs=F(L,e=>e.reduce((n,t)=>n+(t.duration||0),0));var Vs=F(L,e=>e.filter(n=>n.liked)),Bs=F(L,en,Pi,Di,(e,n,t,r)=>({tracks:e,loading:n,error:t,count:r,isEmpty:r===0}));var nt=(e,n)=>{let t=f(P),r=f(ve),o=e.paramMap.get("id");return o?t.select(L).pipe(K(1),A(i=>i.some(a=>a.id===o)?!0:(console.warn(`Track with ID ${o} not found`),r.createUrlTree(["/library"])))):(console.warn("No track ID provided in route"),J(r.createUrlTree(["/library"])))},Ur=class e{store=f(P);router=f(ve);canActivate(n,t){return nt(n,t)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})};var ue=I("[Track List] Load Tracks"),Ae=I("[Track API] Load Tracks Success",M()),Nr=I("[Track API] Load Tracks Failure",M()),rt=I("[Add Track Page] Add Track",M()),Re=I("[Track API] Add Track Success",M()),ot=I("[Track API] Add Track Failure",M()),it=I("[Edit Track Page] Update Track",M()),Ce=I("[Track API] Update Track Success",M()),st=I("[Track API] Update Track Failure",M()),ct=I("[Track Card] Delete Track",M()),Oe=I("[Track API] Delete Track Success",M()),at=I("[Track API] Delete Track Failure",M()),$r=I("[Track Detail] Select Track",M()),zr=I("[Track Detail] Clear Selected Track"),ut=I("[Library] Reorder Tracks",M()),lt=I("[Track API] Reorder Tracks Success",M()),Lr=I("[Track] Clear Error"),Hr=I("[Track] Clear Success");var Br=!1,le=(e,n)=>{let t=f(P);return Br||(t.dispatch(ue()),Br=!0),t.select(en).pipe(j(r=>!r),K(1),A(()=>!0))},qr=class e{store=f(P);router=f(ve);canActivate(n,t){return le(n,t)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})};var Gr=[{path:"",redirectTo:"/library",pathMatch:"full"},{path:"library",loadComponent:()=>import("./chunk-STAOAMKV.js").then(e=>e.LibraryComponent),canActivate:[le]},{path:"add-track",loadComponent:()=>import("./chunk-2EVZHRA2.js").then(e=>e.AddTrackComponent),canActivate:[le]},{path:"edit-track/:id",loadComponent:()=>import("./chunk-TIHH2O6H.js").then(e=>e.EditTrackComponent),canActivate:[le,nt]},{path:"track/:id",loadComponent:()=>import("./chunk-4JKDDISE.js").then(e=>e.TrackDetailComponent),canActivate:[le,nt]},{path:"**",redirectTo:"/library"}];var Kr={tracks:[],selectedTrackId:null,loading:!1,error:null,success:!1};var Zr=sr(Kr,C(ue,e=>v(p({},e),{loading:!0,error:null})),C(Ae,(e,{tracks:n})=>v(p({},e),{tracks:n,loading:!1,error:null})),C(Nr,(e,{error:n})=>v(p({},e),{loading:!1,error:n})),C(rt,e=>v(p({},e),{loading:!0,error:null,success:!1})),C(Re,(e,{track:n})=>v(p({},e),{tracks:[...e.tracks,n],loading:!1,success:!0,error:null})),C(ot,(e,{error:n})=>v(p({},e),{loading:!1,error:n,success:!1})),C(it,e=>v(p({},e),{loading:!0,error:null,success:!1})),C(Ce,(e,{track:n})=>v(p({},e),{tracks:e.tracks.map(t=>t.id===n.id?n:t),loading:!1,success:!0,error:null})),C(st,(e,{error:n})=>v(p({},e),{loading:!1,error:n,success:!1})),C(ct,e=>v(p({},e),{loading:!0,error:null})),C(Oe,(e,{id:n})=>v(p({},e),{tracks:e.tracks.filter(t=>t.id!==n),loading:!1,success:!0,selectedTrackId:e.selectedTrackId===n?null:e.selectedTrackId})),C(at,(e,{error:n})=>v(p({},e),{loading:!1,error:n})),C($r,(e,{id:n})=>v(p({},e),{selectedTrackId:n})),C(zr,e=>v(p({},e),{selectedTrackId:null})),C(ut,e=>v(p({},e),{loading:!0})),C(lt,(e,{tracks:n})=>v(p({},e),{tracks:n,loading:!1})),C(Lr,e=>v(p({},e),{error:null})),C(Hr,e=>v(p({},e),{success:!1})));var dt=class e{actions$=f(dr);apiService=f(Mn);indexedDbStorage=f(_n);storageService=f(wn);loadTracks$=ne(()=>this.actions$.pipe(re(ue),de(()=>this.apiService.getAllTracks().pipe(A(n=>{let t=qe.songsToTracks(n);return Ae({tracks:t})}),V(n=>{console.warn("API not available, using localStorage fallback",n);let t=this.storageService.getTracks();return J(Ae({tracks:t}))})))));addTrack$=ne(()=>this.actions$.pipe(re(rt),Q(o=>we(this,[o],function*({track:n,audioFile:t,coverImage:r}){try{let i=v(p({},n),{id:this.generateId(),addedDate:new Date});if(t){let s=yield this.indexedDbStorage.storeAudioFile(i.id,t);i.filePath=s}if(r){let s=yield this.indexedDbStorage.storeCoverImage(i.id,r);i.coverImage=s}this.storageService.addTrack(i);try{let s=qe.trackToSong(i);yield this.apiService.createTrack(s).toPromise()}catch(s){console.warn("Could not sync with API, saved locally only",s)}return Re({track:i})}catch(i){return ot({error:i.message||"Failed to add track"})}}))));updateTrack$=ne(()=>this.actions$.pipe(re(it),Q(o=>we(this,[o],function*({track:n,audioFile:t,coverImage:r}){try{let i=p({},n);if(t){let s=yield this.indexedDbStorage.storeAudioFile(n.id,t);i.filePath=s}if(r){let s=yield this.indexedDbStorage.storeCoverImage(n.id,r);i.coverImage=s}this.storageService.updateTrack(n.id,i);try{let s=qe.trackToSong(i);yield this.apiService.updateTrack(n.id,s).toPromise()}catch(s){console.warn("Could not sync with API, updated locally only",s)}return Ce({track:i})}catch(i){return st({error:i.message||"Failed to update track"})}}))));deleteTrack$=ne(()=>this.actions$.pipe(re(ct),Q(t=>we(this,[t],function*({id:n}){try{yield this.indexedDbStorage.deleteAllTrackFiles(n),this.storageService.deleteTrack(n);try{yield this.apiService.deleteTrack(n).toPromise()}catch(r){console.warn("Could not sync deletion with API",r)}return Oe({id:n})}catch(r){return at({error:r.message||"Failed to delete track"})}}))));reorderTracks$=ne(()=>this.actions$.pipe(re(ut),A(({trackIds:n})=>{this.storageService.saveTrackOrder(n);let t=this.storageService.getTracks(),r=n.map(o=>t.find(i=>i.id===o)).filter(o=>o!==void 0);return lt({tracks:r})})));clearSuccessAfterDelay$=ne(()=>this.actions$.pipe(re(Re,Ce,Oe),mn(()=>{setTimeout(()=>{},3e3)})),{dispatch:!1});generateId(){return`track_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static \u0275fac=function(t){return new(t||e)};static \u0275prov=S({token:e,factory:e.\u0275fac})};function Wr(e){switch(e.status){case 0:return"Le serveur est inaccessible. V\xE9rifiez votre connexion.";case 400:return e.error?.message||"Requ\xEAte invalide. V\xE9rifiez les donn\xE9es envoy\xE9es.";case 401:return"Non autoris\xE9. Veuillez vous connecter.";case 403:return"Acc\xE8s refus\xE9. Vous n'avez pas les droits n\xE9cessaires.";case 404:return"Ressource non trouv\xE9e.";case 409:return"Conflit. La ressource existe d\xE9j\xE0.";case 422:return e.error?.message||"Donn\xE9es invalides.";case 500:return"Erreur serveur interne. R\xE9essayez plus tard.";case 502:return"Passerelle incorrecte. Le serveur est peut-\xEAtre en maintenance.";case 503:return"Service indisponible. R\xE9essayez plus tard.";case 504:return"D\xE9lai d'attente d\xE9pass\xE9. Le serveur met trop de temps \xE0 r\xE9pondre.";default:return`Erreur ${e.status}: ${e.message}`}}function Xr(e,n){let t={timestamp:new Date().toISOString(),url:e.url,method:e.method,status:n.status,statusText:n.statusText,message:n.message,error:n.error};console.group("\u{1F534} HTTP Error"),console.table(t),console.groupEnd()}var Jr=(e,n)=>n(e).pipe(kt(1),V(t=>{let r="";return t.error instanceof ErrorEvent?(r=`Client Error: ${t.error.message}`,console.error("Client-side error:",t.error.message)):(r=Wr(t),console.error(`Server Error: ${t.status}`,t.message,t.error)),Xr(e,t),vt(()=>new Error(r))})),Yr=class e{intercept(n,t){return t.handle(n).pipe(kt(1),V(r=>{let o="";return r.error instanceof ErrorEvent?o=`Client Error: ${r.error.message}`:o=Wr(r),Xr(n,r),vt(()=>new Error(o))}))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=S({token:e,factory:e.\u0275fac})};var ft=0,pt=me(!1),eo=(e,n)=>(ft++,ft===1&&(pt.set(!0),console.log("\u{1F504} Loading started...")),n(e).pipe(je(()=>{ft--,ft===0&&(pt.set(!1),console.log("\u2705 Loading finished"))}))),Qr=class e{activeRequests=0;intercept(n,t){return this.activeRequests++,this.activeRequests===1&&(pt.set(!0),console.log("\u{1F504} Loading started...")),t.handle(n).pipe(je(()=>{this.activeRequests--,this.activeRequests===0&&(pt.set(!1),console.log("\u2705 Loading finished"))}))}getActiveRequestsCount(){return this.activeRequests}isLoadingState(){return this.activeRequests>0}static \u0275fac=function(t){return new(t||e)};static \u0275prov=S({token:e,factory:e.\u0275fac})};var to={providers:[Tn({eventCoalescing:!0}),On(Gr),In(An([Jr,eo])),ir({tracks:Zr}),pr([dt]),Dr({maxAge:25,logOnly:!he(),autoPause:!0,trace:!1,traceLimit:75})]};function Ni(e,n){e&1&&(R(0,"div",18),w(1," \u231B Chargement... "),E())}function $i(e,n){if(e&1){let t=vn();R(0,"div",1)(1,"div",2)(2,"div",3),w(3),E(),R(4,"div",4),w(5),E(),R(6,"div",5),w(7),At(8,"titlecase"),E()(),R(9,"div",6)(10,"input",7),X("input",function(o){Z(t);let i=B();return Y(i.seek(o))}),E()(),R(11,"div",8)(12,"button",9),X("click",function(){Z(t);let o=B();return Y(o.previous())}),w(13," \u23EE Prev "),E(),R(14,"button",10),X("click",function(){Z(t);let o=B();return Y(o.play())}),w(15," \u25B6 Play "),E(),R(16,"button",11),X("click",function(){Z(t);let o=B();return Y(o.pause())}),w(17," \u23F8 Pause "),E(),R(18,"button",12),X("click",function(){Z(t);let o=B();return Y(o.stop())}),w(19," \u23F9 Stop "),E(),R(20,"button",13),X("click",function(){Z(t);let o=B();return Y(o.next())}),w(21," Next \u23ED "),E()(),R(22,"div",14)(23,"label",15),w(24,"\u{1F50A} Volume:"),E(),R(25,"input",16),X("input",function(o){Z(t);let i=B();return Y(i.setVolume(o))}),E(),R(26,"span"),w(27),E()(),Et(28,Ni,2,0,"div",17),E()}if(e&2){let t=n.ngIf,r=B();W(3),Ve(r.formatTime(t.currentTime)),W(2),Ve(r.formatTime(t.duration)),W(2),Ve(Rt(8,8,t.status)),W(3),ge("max",t.duration||0)("value",t.currentTime),W(15),ge("value",t.volume),W(2),yn("",r.Math.round(t.volume*100),"%"),W(),ge("ngIf",t.isLoading)}}var mt=class e{constructor(n,t){this.audioPlayerService=n;this.trackService=t;this.playerState$=this.audioPlayerService.playerState$}playerState$;Math=Math;ngOnInit(){this.trackService.getTracks().subscribe(n=>{this.audioPlayerService.setPlaylist(n)})}play(){this.audioPlayerService.play("https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3","default-track")}pause(){this.audioPlayerService.pause()}stop(){this.audioPlayerService.stop()}next(){this.audioPlayerService.next()}previous(){this.audioPlayerService.previous()}setVolume(n){let t=parseFloat(n.target.value);this.audioPlayerService.setVolume(t)}seek(n){let t=n.target.value;this.audioPlayerService.seek(t)}formatTime(n){if(!n||isNaN(n))return"0:00";let t=Math.floor(n/60),r=Math.floor(n%60);return`${t}:${r<10?"0":""}${r}`}static \u0275fac=function(t){return new(t||e)(xt(Pn),xt(Fn))};static \u0275cmp=He({type:e,selectors:[["app-audio-player"]],decls:2,vars:3,consts:[["class","audio-player",4,"ngIf"],[1,"audio-player"],[1,"player-display"],[1,"current-time"],[1,"duration"],[1,"status"],[1,"progress-bar"],["type","range","min","0",1,"progress-slider",3,"input","max","value"],[1,"controls"],["title","Piste pr\xE9c\xE9dente",1,"control-btn","prev-btn",3,"click"],["title","Lecture",1,"control-btn","play-btn",3,"click"],["title","Pause",1,"control-btn","pause-btn",3,"click"],["title","Arr\xEAt",1,"control-btn","stop-btn",3,"click"],["title","Piste suivante",1,"control-btn","next-btn",3,"click"],[1,"volume-control"],["for","volume"],["id","volume","type","range","min","0","max","1","step","0.1",1,"volume-slider",3,"input","value"],["class","loading",4,"ngIf"],[1,"loading"]],template:function(t,r){t&1&&(Et(0,$i,29,10,"div",0),At(1,"async")),t&2&&ge("ngIf",Rt(1,1,r.playerState$))},dependencies:[xn,kn,Sn,bn],styles:[".audio-player[_ngcontent-%COMP%]{background-color:#222;color:#fff;padding:20px;border-radius:8px;box-shadow:0 4px 12px #0000004d;margin:20px 0;max-width:100%}.player-display[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:15px;font-size:14px;color:#aaa}.current-time[_ngcontent-%COMP%], .duration[_ngcontent-%COMP%]{font-weight:700}.status[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;color:#007bff}.progress-bar[_ngcontent-%COMP%]{margin-bottom:15px}.progress-slider[_ngcontent-%COMP%]{width:100%;height:6px;border-radius:3px;background:#444;outline:none;-webkit-appearance:none;appearance:none}.progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:14px;height:14px;border-radius:50%;background:#007bff;cursor:pointer;transition:all .3s ease}.progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{background:#0056b3;transform:scale(1.2)}.progress-slider[_ngcontent-%COMP%]::-moz-range-thumb{width:14px;height:14px;border-radius:50%;background:#007bff;cursor:pointer;border:none;transition:all .3s ease}.progress-slider[_ngcontent-%COMP%]::-moz-range-thumb:hover{background:#0056b3;transform:scale(1.2)}.controls[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:15px;justify-content:center}.control-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;background-color:#444;color:#fff;cursor:pointer;font-weight:700;transition:all .3s ease}.control-btn[_ngcontent-%COMP%]:hover{background-color:#555;transform:scale(1.05)}.play-btn[_ngcontent-%COMP%]{background-color:#28a745}.play-btn[_ngcontent-%COMP%]:hover{background-color:#218838}.pause-btn[_ngcontent-%COMP%]{background-color:#ffc107}.pause-btn[_ngcontent-%COMP%]:hover{background-color:#e0a800}.stop-btn[_ngcontent-%COMP%]{background-color:#dc3545}.stop-btn[_ngcontent-%COMP%]:hover{background-color:#c82333}.volume-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:15px}.volume-control[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;min-width:60px}.volume-slider[_ngcontent-%COMP%]{flex:1;height:4px;border-radius:2px;background:#444;outline:none;-webkit-appearance:none;appearance:none}.volume-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:12px;height:12px;border-radius:50%;background:#007bff;cursor:pointer}.volume-slider[_ngcontent-%COMP%]::-moz-range-thumb{width:12px;height:12px;border-radius:50%;background:#007bff;cursor:pointer;border:none}.volume-control[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:40px;text-align:right;font-weight:700}.loading[_ngcontent-%COMP%]{text-align:center;color:#ffc107;font-weight:700;margin-top:10px}"]})};var gt=class e{title="MusicStream";static \u0275fac=function(t){return new(t||e)};static \u0275cmp=He({type:e,selectors:[["app-root"]],decls:15,vars:0,consts:[[1,"navbar"],[1,"nav-container"],[1,"nav-title"],[1,"nav-links"],["routerLink","/library"],["routerLink","/add-track"],[1,"main-content"],[1,"player-footer"]],template:function(t,r){t&1&&(R(0,"nav",0)(1,"div",1)(2,"h1",2),w(3,"\u{1F3B5} MusicStream"),E(),R(4,"ul",3)(5,"li")(6,"a",4),w(7,"\u{1F4DA} Library"),E()(),R(8,"li")(9,"a",5),w(10,"\u2795 Add Track"),E()()()()(),R(11,"main",6),It(12,"router-outlet"),E(),R(13,"footer",7),It(14,"app-audio-player"),E())},dependencies:[Rn,Cn,mt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100vh}.navbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px 0;box-shadow:0 2px 8px #0003;position:sticky;top:0;z-index:100}.nav-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center}.nav-title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;margin:0;letter-spacing:1px}.nav-links[_ngcontent-%COMP%]{list-style:none;display:flex;gap:30px}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:600;font-size:16px;transition:all .3s ease;padding:8px 16px;border-radius:4px}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#fff3;transform:translateY(-2px)}.main-content[_ngcontent-%COMP%]{flex:1;background-color:#f5f5f5;overflow-y:auto}.player-footer[_ngcontent-%COMP%]{background-color:#1a1a1a;border-top:3px solid #667eea;box-shadow:0 -2px 8px #0003;min-height:150px}@media (max-width: 768px){.nav-container[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.nav-title[_ngcontent-%COMP%]{font-size:20px}.nav-links[_ngcontent-%COMP%]{gap:15px}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px;padding:6px 12px}}","*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#f5f5f5;color:#333}.navbar[_ngcontent-%COMP%]{background-color:#1a1a1a;color:#fff;padding:15px 0;box-shadow:0 2px 8px #0000001a;position:sticky;top:0;z-index:100}.nav-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center}.nav-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.nav-links[_ngcontent-%COMP%]{list-style:none;display:flex;gap:20px}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:500;transition:color .3s ease}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#007bff}.main-content[_ngcontent-%COMP%]{min-height:calc(100vh - 280px);padding:20px 0}.player-footer[_ngcontent-%COMP%]{background-color:#1a1a1a;border-top:1px solid #333;padding:10px 0;position:sticky;bottom:0}"]})};En(gt,to).catch(e=>console.error(e));
